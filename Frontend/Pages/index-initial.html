<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fortune | Portfolio Manager</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div class="container">
        <aside class="sidebar">
            <div class="logo">
                <i class="fa-solid fa-chart-line"></i> FORTUNE
            </div>
            <nav>
                <ul>
                    <li class="active" onclick="showPage('overview')"><i class="fa-solid fa-gauge"></i> Portfolio Overview</li>
                    <li onclick="showPage('holdings')"><i class="fa-solid fa-wallet"></i> Asset Holdings</li>
                    <li onclick="showPage('risk')"><i class="fa-solid fa-shield-halved"></i> Risk Analytics</li>
                    <li onclick="showPage('comparison')"><i class="fa-solid fa-users-viewfinder"></i> Client Comparison</li>
                </ul>
            </nav>
            
            <div class="watchlist-section">
                <h3><i class="fa-regular fa-star"></i> My Watchlist</h3>
                <div class="add-watchlist">
                    <input type="text" id="watchlistInput" placeholder="Symbol (e.g. TCS)">
                    <button onclick="addToWatchlist()"><i class="fa-solid fa-plus"></i></button>
                </div>
                <ul id="watchlistItems">
                    </ul>
            </div>
        </aside>

        <main class="main-content">
            
            <section id="overview" class="page active">
                <header>
                    <h1>Dashboard Overview</h1>
                    <div class="user-profile">Manager <i class="fa-solid fa-user-tie"></i></div>
                </header>
                <div class="kpi-grid">
                    <div class="card kpi">
                        <h3>Total Clients</h3>
                        <p id="totalClients">0</p>
                    </div>
                    <div class="card kpi">
                        <h3>Assets Under Management</h3>
                        <p id="totalAum">$0.00</p>
                    </div>
                    <div class="card kpi">
                        <h3>Top Performing Asset</h3>
                        <p>GOLD (24k)</p> </div>
                </div>
                <div class="chart-container card">
                    <h3>Market Overview</h3>
                    <canvas id="marketChart"></canvas>
                </div>
            </section>

            <section id="holdings" class="page">
                <header>
                    <h1>Asset Holdings & Trade</h1>
                </header>
                <div class="controls">
                    <select id="clientSelectHoldings" onchange="loadClientHoldings()">
                        <option value="">Select Client...</option>
                    </select>
                    <button class="btn-primary" onclick="openBuyModal()">+ Buy Asset</button>
                </div>
                
                <div class="card table-responsive">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>Asset Name</th>
                                <th>Category</th>
                                <th>Quantity</th>
                                <th>Avg Price</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="holdingsTableBody">
                            <tr><td colspan="6" class="text-center">Select a client to view holdings</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="risk" class="page">
                <header>
                    <h1>Risk Analytics</h1>
                </header>
                <div class="analytics-grid">
                    <div class="card">
                        <h3>Asset Allocation (Diversification)</h3>
                        <canvas id="allocationChart"></canvas>
                    </div>
                    <div class="card">
                        <h3>Risk Score</h3>
                        <div class="risk-meter">
                            <div class="meter-fill" style="width: 65%;"></div>
                        </div>
                        <p>Moderate Risk (65/100)</p>
                        <small>Based on high Commodity exposure</small>
                    </div>
                </div>
            </section>

            <section id="comparison" class="page">
                <header>
                    <h1>Client Comparison</h1>
                </header>
                <div class="compare-controls">
                    <select id="compareClient1">
                        <option value="">Client A</option>
                    </select>
                    <span>VS</span>
                    <select id="compareClient2">
                        <option value="">Client B</option>
                    </select>
                    <button class="btn-primary" onclick="compareClients()">Compare</button>
                </div>
                <div class="card">
                    <canvas id="comparisonChart"></canvas>
                </div>
            </section>

        </main>
    </div>

    <div id="buyModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('buyModal')">&times;</span>
            <h2>Buy Asset</h2>
            <form id="buyForm" onsubmit="handleBuy(event)">
                <div class="form-group">
                    <label>Asset</label>
                    <select id="buyAssetSelect" required></select>
                </div>
                <div class="form-group">
                    <label>Quantity</label>
                    <input type="number" id="buyQty" min="1" required>
                </div>
                <div class="form-group">
                    <label>Price</label>
                    <input type="number" id="buyPrice" required>
                </div>
                <button type="submit" class="btn-primary">Confirm Purchase</button>
            </form>
        </div>
    </div>

    <div id="assetModal" class="modal">
        <div class="modal-content large">
            <span class="close" onclick="closeModal('assetModal')">&times;</span>
            <h2 id="assetModalTitle">Asset Details</h2>
            <p id="assetModalDesc"></p>
            <div style="height: 300px;">
                <canvas id="assetDetailChart"></canvas>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>